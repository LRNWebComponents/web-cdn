{"version":3,"sources":["byu-theme-components.js"],"names":["resolveUrl","script","callback","loading","resolved","cb","status","HTMLScriptElement","addEventListener","createLoader","document","createElement","loader","src","async","onload","head","appendChild","ABSOLUTE_URL_PATTERN","test","url","resolveRelative","querySelector","opts","thisFile","replace","window","byu","webCommunityComponents","comps","resourceLoading","compatBundle","Function","bundle","forcePolyfills","HTMLElement","prototype","attachShadow","needsPolyfills","shadow","customElements","ensureLoaded","polyfillUrl","polyfills","bundleToLoad"],"mappings":"AAgBA,aACA,CAAC,WAAgB,CAoBb,eAAwC,CACpC,GAAI,GAAWA,EAAWC,CAAX,CAAf,CACI,EAAKC,GAAY,UAAY,CAC5B,CAFL,CAGI,EAASC,EAAQC,CAAR,CAHb,CAIe,MAAX,IALgC,CAMhCC,GANgC,CAOxBC,CAPwB,CAYzBA,YAAkBC,kBAZO,EAahCD,EAAOE,gBAAP,CAAwB,MAAxB,CAAgC,UAAY,CACxCH,GACH,CAFD,CAbgC,CAQhCF,EAAQC,CAAR,EAAoBK,EAAaL,CAAb,CAAuB,UAAY,CACnDD,EAAQF,CAAR,EAAkB,MADiC,CAEnDI,GACH,CAHmB,CAS3B,CAED,eAAkC,CAC9B,GAAI,GAASK,SAASC,aAAT,CAAuB,QAAvB,CAAb,CAKA,MAJAC,GAAOC,GAAP,CAAaZ,CAIb,CAHAW,EAAOE,KAAP,GAGA,CAFAF,EAAOG,MAAP,CAAgBV,CAEhB,CADAK,SAASM,IAAT,CAAcC,WAAd,CAA0BL,CAA1B,CACA,CAAOA,CACV,CA0BD,aAAyB,CACrB,GAAI,GAAuB,qBAA3B,CADqB,MAEjBM,GAAqBC,IAArB,CAA0BC,CAA1B,CAFiB,CAGVA,CAHU,CAKVC,EAAgBD,CAAhB,CAEd,CAED,aAAiC,CAC7B,GAAI,GAAWV,SAASY,aAAT,CAAuB,eAAiBC,EAAKX,MAAtB,CAA+B,GAAtD,CAAf,CACA,MAAOY,GAASX,GAAT,CAAaY,OAAb,CAAqBF,EAAKX,MAA1B,CAAkCX,CAAlC,CACV,CAnFD,GAAI,GAAMyB,OAAOC,GAAP,CAAaD,OAAOC,GAAP,IAAvB,CACI,EAAQA,EAAIC,sBAAJ,CAA6BF,OAAOC,GAAP,CAAWC,sBAAX,IADzC,CAEI,EAAUC,EAAMC,eAAN,CAAwBD,EAAMC,eAAN,IAFtC,CAII,CAJJ,CADa,EAMTP,EAAKQ,YANI,CAgDb,UAAoB,CAChB,GAAI,CAEA,MADA,IAAIC,SAAJ,CAAa,oBAAb,CACA,GACH,CAAC,QAAU,CACR,QACH,CACJ,CAhDkB,GAAaT,EAAKU,MAAlB,CAA2BV,EAAKQ,YAPtC,CASMR,EAAKU,MATX,CAyDb,UAA0B,CACtB,GAAI,GAAiBJ,EAAMK,cAA3B,CACI,CADJ,CAMA,GAAI,EAAE,kBAAoBL,EAAtB,CAAJ,CAAkC,CAC9B,GAAI,GAAS,CAAC,CAACM,YAAYC,SAAZ,CAAsBC,YAArC,CACI,EAAiB,kBAAoBX,OADzC,CAEA,EAAiBG,EAAMS,cAAN,CAAuB,CAACC,CAAD,EAAW,CAACC,CACvD,CACD,MAAOF,IAAkBJ,CAC5B,CA1DG,EAZS,CAaTO,EAAaZ,EAAMa,WAAN,EAAqBnB,EAAKoB,SAAvC,CAAkD,UAAY,CAC1DF,EAAaG,CAAb,CACH,CAFD,CAbS,CAiBTH,EAAaG,CAAb,CAoEP,CArFD,EAqFG,CACChC,OAAQ,yBADT,CAEC+B,UAAW,mFAFZ,CAGCV,OAAQ,mBAHT,CAICF,aAAc,0BAJf,CArFH,C","file":"byu-theme-components.min.js","sourcesContent":["/*\n *  @license\n *    Copyright 2017 Brigham Young University\n *\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License.\n *    You may obtain a copy of the License at\n *\n *        http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *    See the License for the specific language governing permissions and\n *    limitations under the License.\n */\n\"use strict\";\n(function (opts) {\n    var byu = window.byu = window.byu || {};\n    var comps = byu.webCommunityComponents = window.byu.webCommunityComponents || {};\n    var loading = comps.resourceLoading = comps.resourceLoading || {};\n\n    var bundleToLoad;\n    if (opts.compatBundle) {\n        bundleToLoad = canDoEs6() ? opts.bundle : opts.compatBundle;\n    } else {\n        bundleToLoad = opts.bundle;\n    }\n\n    if (needsPolyfills()) {\n        ensureLoaded(comps.polyfillUrl || opts.polyfills, function () {\n            ensureLoaded(bundleToLoad);\n        });\n    } else {\n        ensureLoaded(bundleToLoad);\n    }\n\n    function ensureLoaded(script, callback) {\n        var resolved = resolveUrl(script);\n        var cb = callback || function () {\n            };\n        var status = loading[resolved];\n        if (status === 'done') {\n            cb();\n        } else if (!status) {\n            loading[resolved] = createLoader(resolved, function () {\n                loading[script] = 'done';\n                cb();\n            });\n        } else if (status instanceof HTMLScriptElement) {\n            status.addEventListener('load', function () {\n                cb();\n            });\n        }\n    }\n\n    function createLoader(script, cb) {\n        var loader = document.createElement('script');\n        loader.src = script;\n        loader.async = true;\n        loader.onload = cb;\n        document.head.appendChild(loader);\n        return loader;\n    }\n\n    function canDoEs6() {\n        try {\n            new Function(\"class TestClass {}\");\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function needsPolyfills() {\n        var forcePolyfills = comps.forcePolyfills;\n        var needsPolyfills;\n\n        //This is here because if we have multiple component bundles on the page and one of them has already loaded the\n        //  polyfills, we would erroneously detect that we don't need to load them and load the native ES6 code instead\n        //  (which could cause problems).  So, we set 'needsPolyfills' to tell ourselves to ignore the feature detection.\n        if (!('needsPolyfills' in comps)) {\n            var shadow = !!HTMLElement.prototype.attachShadow;\n            var customElements = 'customElements' in window;\n            needsPolyfills = comps.needsPolyfills = !shadow || !customElements;\n        }\n        return needsPolyfills || forcePolyfills;\n    }\n\n    function resolveUrl(url) {\n        var ABSOLUTE_URL_PATTERN = /^https?:\\/\\/|^\\/\\//i;\n        if (ABSOLUTE_URL_PATTERN.test(url)) {\n            return url;\n        } else {\n            return resolveRelative(url);\n        }\n    }\n\n    function resolveRelative(script) {\n        var thisFile = document.querySelector('script[src*=' + opts.loader + ']');\n        return thisFile.src.replace(opts.loader, script);\n    }\n})({\n    loader: 'byu-theme-components.js',\n    polyfills: 'https://cdn.byu.edu/web-component-polyfills/latest/web-component-polyfills.min.js',\n    bundle: 'components.min.js',\n    compatBundle: 'components-compat.min.js'\n});\n"]}